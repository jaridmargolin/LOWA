var lowa=window.lowa={};lowa._anchor=document.createElement('a'),lowa.rootNode=document.createElement('div'),lowa.views={},lowa.handlers=[],lowa.load=function(a,b){var c=[],d=function(e){lowa.loaded||(lowa.loaded=!0,lowa._addStyles(c),lowa._executeHandlers(),b&&b(e,c))};a.forEach(function(e,f){lowa._loadFile(e.src,function(g,h){c[f]=h,g&&e.required?d(lowa.error=g):c.length===a.length&&d(null)})})},lowa.ready=function(a){return lowa.loaded?lowa._executeHandler(a):lowa.handlers.push(a)},lowa.show=function(a){var b=lowa.views[a].apply(this,Array.prototype.slice.call(arguments,1));lowa.hide(),lowa.rootNode.appendChild(lowa._createStyles(b.styles)),lowa.rootNode.appendChild(lowa._createHtml(b.html)),document.getElementsByTagName('body')[0].appendChild(lowa.rootNode)},lowa.hide=function(){for(;lowa.rootNode.firstChild;)lowa.rootNode.removeChild(lowa.rootNode.firstChild)},lowa.register=function(a,b){this.views[a]=b},lowa.setBg=function(a){lowa.rootNode.style='z-index:-1;position:absolute;top:0px;left:0px;bottom:0px;right:0px;background:'+a},lowa._loadFile=function(a,b){var c=new XMLHttpRequest;c.timeout=3e4,c.overrideMimeType('text/css; charset=UTF-8'),c.onreadystatechange=function(){if(4===c.readyState&&200<=c.status&&400>c.status){var d=lowa._createStyles(lowa._rewriteUrls(a,c.responseText));b(null,d)}else 4===c.readyState&&b(new Error('Request returned with error response.'),null)},c.open('GET',a,!0),c.send(null)},lowa._executeHandlers=function(){lowa.handlers.forEach(function(a){lowa._executeHandler(a)})},lowa._executeHandler=function(a){lowa.error||setTimeout(a,0)},lowa._addStyles=function(a){var b=document.getElementsByTagName('head')[0];lowa.error||a.forEach(function(c){c&&b.appendChild(c)})},lowa._createStyles=function(a){var b=document.createElement('style');return b.appendChild(document.createTextNode(a||'')),b},lowa._createHtml=function(a){var b=document.createElement('div');return b.innerHTML=a||'',b},lowa._resolveUrl=function(a){return lowa._anchor.href=a,lowa._anchor.href},lowa._rewriteUrls=function(a,b){var c=lowa._resolveUrl(a.substring(0,a.lastIndexOf('/'))),d=c+('/'===c.substr(-1)?'':'/');return b.replace(/url\('?(.+?)'?\)/g,function(e,f){return'.'===f[0]?'url(\''+lowa._resolveUrl(d+f)+'\')':e})};